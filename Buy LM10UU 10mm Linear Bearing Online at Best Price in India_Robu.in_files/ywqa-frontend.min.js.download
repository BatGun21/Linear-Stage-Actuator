jQuery(document).ready(function(a){var e=-1;function t(){ywqa.recaptcha&&("v2"==ywqa.recaptcha_version&&ywqa.recaptcha&&jQuery("#ywqa-g-recaptcha:empty").length?void 0!==grecaptcha.render&&(e=grecaptcha.render("ywqa-g-recaptcha",{sitekey:ywqa.recaptcha_sitekey})):grecaptcha.ready(function(){grecaptcha.execute(ywqa.recaptcha_sitekey,{action:"homepage"}).then(function(e){a("#ywqa-g-recaptcha").prepend('<input type="hidden" name="g-recaptcha-response" value="'+e+'">')})}))}function n(e,n){var o={action:"show_question_list",product_id:a("#ywqa-questions-and-answers-product-id").val(),answered:e,show_all:n},s=a("#ywqa-questions-and-answers");s.length&&(s.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),a.post(ywqa.ajax_url,o,function(e){-1==e.code?top.location.replace(e.value):1==e.code&&a("#ywqa-questions-and-answers").replaceWith(e.items),t(),n&&a("#show-all-questions").remove(),s.unblock()}))}function o(e,t){a("<span class='operation-error'>"+t+"</span>").insertAfter(a(e))}function s(e){var t=a("#ywqa_user_content"),n=a('input[name="ywqa-guest-name"]'),s=a('input[name="ywqa-guest-email"]'),r=0;if(0==t.val().length&&(o(t,ywqa.content_is_empty),r=1),n.length&&ywqa.mandatory_guest_data&&!n.val().length&&(o(n,ywqa.guest_name_message),r=1),s.length)if(ywqa.mandatory_guest_data&&!s.val().length)o(s,ywqa.guest_email_message),r=1;else if(s.val().length){/^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,5}$/i.test(s.val())||(o(s,ywqa.guest_email_message),r=1)}return 0==r}function r(e,n){var o={action:"goto_question",discussion_id:e,order:void 0!==n?n:"default"},s=a("#ywqa-questions-and-answers");s.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),a.post(ywqa.ajax_url,o,function(e){-1==e.code?top.location.replace(e.value):1==e.code&&a("#ywqa-questions-and-answers").replaceWith(e.items),t(),s.unblock()})}ywqa.grecaptcha&&grecaptcha.ready(function(){t()}),a(document).on("vc_js",function(){t()}),a("div.woocommerce-tabs ul.tabs li.questions_tab").on("click",function(a){a.preventDefault(),n(!1,!1)}),1==ywqa.goto_questions_tab&&a(document).find(".woocommerce-tabs ul.tabs li.questions_tab a")[0].click(),a(document).on("click","a.vote-question",function(e){e.preventDefault();a(this);var t={action:"vote_question",discussion_id:a(this).attr("data-discussion-id"),discussion_vote:a(this).attr("data-discussion-vote"),_wpnonce:ywqa.nonce_value,return_path:window.location.href},n=a(this).closest("div.question-votes");n.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),a.post(ywqa.ajax_url,t,function(a){-1==a.code?top.location.replace(a.value):1==a.code&&n.children("span.question-votes-count").text(a.value),n.unblock()})}),a(document).on("click","a.answer-helpful, a.answer-not-helpful",function(e){e.preventDefault();a(this);var t={action:"vote_answer",discussion_id:a(this).attr("data-discussion-id"),discussion_vote:a(this).attr("data-discussion-vote"),_wpnonce:ywqa.nonce_value,return_path:window.location.href},n=a(this).closest("div.answer-helpful");n.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),a.post(ywqa.ajax_url,t,function(a){-1==a.code?top.location.replace(a.value):1==a.code&&n.children("span.answer-stat-text").text(a.value),n.unblock()})}),a(document).on("click","a.report-answer-abuse",function(e){e.preventDefault();a(this);var t={action:"report_answer_abuse",discussion_id:a(this).attr("data-discussion-id"),discussion_vote:1,_wpnonce:ywqa.nonce_value,return_path:window.location.href},n=a(this).closest("div.answer-abuse");n.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),a.post(ywqa.ajax_url,t,function(e){-1==e.code?top.location.replace(e.value):1==e.code&&n.empty().html('<span class="thanks">'+ywqa.abuse_response+"</span>"),a(document).trigger("yith_ywqa_answer_helpfull",e),n.unblock()})}),a(document).on("click","a.read-more",function(e){e.preventDefault();var t={action:"get_full_content",discussion_id:a(this).attr("data-discussion-id")},n=a(this).closest("div.answer-content");n.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),a.post(ywqa.ajax_url,t,function(a){1==a.code&&(n.children(".read-more").remove(),text=a.value.replace(/(?:\r\n|\r|\n)/g,"<br />"),n.children("span.answer").empty().html(text)),n.unblock()})}),a(document).on("click","a.goto-page",function(e){if(e.preventDefault(),a(this).attr("data-ywqa-product-id").length){var t="get_questions",n=a(this).closest("div#ywqa_question_list");a("ol.item-navigation.answers").length&&(t="get_answers",n=a(this).closest("div#ywqa_answer_list"));var o={action:t,product_id:a(this).attr("data-ywqa-product-id"),order:a(this).attr("data-ywqa-order"),question_id:a(this).attr("data-ywqa-question-id"),page:a(this).attr("data-ywqa-page")};n.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),a.post(ywqa.ajax_url,o,function(a){1==a.code&&(n.find("ol.ywqa-items-list").empty().append(a.items),n.find("ol.item-navigation").empty().append(a.pagination)),n.unblock()})}}),a(document).on("click","input#ywqa-submit-question",function(n){n.preventDefault(),a("span.operation-error").remove(),a("span.operation-completed").remove();try{if(ywqa.recaptcha&&"v2"==ywqa.recaptcha_version&&(null==grecaptcha||!grecaptcha.getResponse(e)))return void a("div.ywqa-ask-question").prepend("<span class='operation-error'>"+ywqa.recaptcha_not_valid+"</span>")}catch(n){return void a("div.ywqa-ask-question").prepend("<span class='operation-error'>"+ywqa.recaptcha_not_valid+"</span>")}if(s()){if("v2"==ywqa.recaptcha_version)var o=a('div#ywqa-g-recaptcha TextArea[name="g-recaptcha-response"]').val();else o=a('div#ywqa-g-recaptcha input[name="g-recaptcha-response"]').val();var r={action:"submit_question",text:a("#ywqa_user_content").val(),subscribe:a("#ywqa-notify-user").length?a("#ywqa-notify-user").prop("checked"):0,product_id:a("#ywqa-questions-and-answers").data("product-id"),recaptcha:o};a("#ywqa-guest-name").length&&(r.name=a("input[name='ywqa-guest-name']").val()),a("#ywqa-guest-email").length&&(r.email=a("input[name='ywqa-guest-email']").val());var i=a("div.ywqa-ask-question");i.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),a.post(ywqa.ajax_url,r,function(e){1==e.code?(a("#ywqa-questions-and-answers").replaceWith(e.items),t(),1==e.waiting_approval&&a("div#submit_answer").append("<span class='operation-completed'>"+e.message+"</span>")):-1==e.code?a("div#ask_question").empty().append("<span class='operation-completed'>"+e.message+"</span>"):a("div#ask_question").append("<span class='operation-error'>"+ywqa.discussion_error+"</span>"),i.unblock()})}}),a(document).on("click","input#ywqa-submit-answer",function(n){n.preventDefault(),a("span.operation-error").remove(),a("span.operation-completed").remove();try{if(ywqa.recaptcha&&"v2"==ywqa.recaptcha_version&&(null==grecaptcha||!grecaptcha.getResponse(e)))return void a("div#submit_answer").prepend("<span class='operation-error'>"+ywqa.recaptcha_not_valid+"</span>")}catch(n){return void a("div#submit_answer").prepend("<span class='operation-error'>"+ywqa.recaptcha_not_valid+"</span>")}if(s()){if("v2"==ywqa.recaptcha_version)var o=a('div#ywqa-g-recaptcha TextArea[name="g-recaptcha-response"]').val();else o=a('div#ywqa-g-recaptcha input[name="g-recaptcha-response"]').val();var r={action:"submit_answer",answer_content:a("#ywqa_user_content").val(),product_id:a("#ywqa-questions-and-answers").data("product-id"),question_id:a("input[name='ywqa_question_id']").val(),recaptcha:o};a("#ywqa-guest-name").length&&(r.name=a("input[name='ywqa-guest-name']").val()),a("#ywqa-guest-email").length&&(r.email=a("input[name='ywqa-guest-email']").val());var i=a("div.ywqa-send-answer");i.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),a.post(ywqa.ajax_url,r,function(e){1==e.code?(a("#ywqa-questions-and-answers").replaceWith(e.items),1==e.waiting_approval&&a("div#submit_answer").append("<span class='operation-completed'>"+e.message+"</span>")):-1==e.code?a("div#submit_answer").append("<span class='operation-error'>"+e.message+"</span>"):a("div#submit_answer").append("<span class='operation-error'>"+ywqa.discussion_error+"</span>"),t(),i.unblock()})}}),a(document).on("click","a.ywqa-question-order",function(e){e.preventDefault(),r(a("input[name='ywqa_question_id']").val(),a(this).data("order"))}),a(document).on("click","a.goto-question",function(e){e.preventDefault(),r(a(this).attr("data-discussion-id"))}),a(document).on("click","a.back-to-product",function(a){a.preventDefault(),n(!1,!1)}),a(document).on("input",'input[name="ywqa-search-text"]',function(e){e.preventDefault();var t={action:"filter_content",product_id:a("#ywqa-questions-and-answers-product-id").val(),text:a(this).val()},n=a(this).closest(".ywqa-container").find(".ywqa-content");n.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),a.post(ywqa.ajax_url,t,function(a){1==a.code&&n.replaceWith(a.items),n.unblock()})}),a(document).on("click","a.show-questions",function(a){a.preventDefault(),n(!1,!0)})});